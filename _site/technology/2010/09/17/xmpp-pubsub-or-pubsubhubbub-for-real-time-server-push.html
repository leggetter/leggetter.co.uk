<!DOCTYPE HTML>
<html lang="en">
<head>
	
	<title>XMPP PubSub or PubSubHubbub for real-time server push? - Phil Leggetter - Developer Experience & Relations Leader</title>
	

	<meta property="og:title" content="XMPP PubSub or PubSubHubbub for real-time server push?" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://www.leggetter.co.uk/technology/2010/09/17/xmpp-pubsub-or-pubsubhubbub-for-real-time-server-push.html" />
	<meta property="og:description" content="In case you hadn't noticed,&nbsp;when I'm not getting hit by flying trout, I like to think of myself as a bit of a real-time web guy. However, there's one thing I'd like clarification on, and I'm confident somebody will be able to shed some light on this:


What are the differences between XMPP PubSub and PubSubHubbub and in what situations should each be used?
" />
	

	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

	<meta name="description" content="In case you hadn't noticed,&nbsp;when I'm not getting hit by flying trout, I like to think of myself as a bit of a real-time web guy. However, there's one thing I'd like clarification on, and I'm confident somebody will be able to shed some light on this:


What are the differences between XMPP PubSub and PubSubHubbub and in what situations should each be used?
" />
	
	<meta name="keywords" content="real-time webcometreal-time datapubsubhubbubSuperfeedrXMPP" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<link rel="alternate" type="application/rss+xml" title="Phil Leggetter's Blog" href="/rss.xml" />
	
	
	<!--[if lte IE 8]><script src="/skel/assets/js/ie/html5shiv.js"></script><![endif]-->
	<link rel="stylesheet" href="/skel/assets/css/main.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="/skel/assets/css/ie8.css" /><![endif]-->
	<link rel="stylesheet" href="/css/skel-mods.css" />

  <link rel="stylesheet" href="/libs/highlight/styles/solarized_dark.css" />
	
	<script src="/skel/assets/js/jquery.min.js"></script>
</head>
<body class="right-sidebar ">

	<!-- Header -->
	<div id="header-wrapper" class="wrapper">
		<div id="header">

  <!-- Logo -->
  <div id="logo">
    <h1><a href="/">Phil Leggetter</a></h1>
    <p>Developer Relations at <a style="font-weight: 900; font-size: 1.1em; color: white;" href="https://posthog.com">PostHog</a>. Leader, Team Builder &amp; Advisor</p>
  </div>

  <!-- Nav -->
  <nav id="nav">
    <ul>
      <li class="current"><a href="/"><img class="logo-sml" src="/images/leggetter-logo-trans-sml.png" title="Phil Leggetter - Home" alt="Phil Leggetter logo" /></a></li>
      <li>
        <a href="/aaarrrp" title="The AAARRRP Developer Relations Strategy Framework">AAARRRP</a>
      </li>
      <li>
        <a href="/real-time-web-technologies-guide/">Realtime Web Guide</a>
        <ul>
          <li><a href="/real-time-web-technologies-guide">Realtime Web Technology Guide</a></li>
          <li><a href="/2013/10/28/history-background-benefits-use-cases-realtime.html">History, Background, Benefits &amp; Use Cases of Realtime</a></li>
          <li><a href="/2013/10/31/fundamentals-realtime-web-realtime-web-functionality.html">Fundamentals of the Realtime Web & Realtime Web Functionality</a></li>
          <li><a href="/2013/12/09/choosing-realtime-web-app-tech-stack.html">Choosing your Realtime Web App Tech Stack</a></li>
          <li><a href="/real-time-web-technologies-guide/developer-tools/">Developer Tools</a></li>
          <li><a href="/real-time-web-technologies-guide/realtime-hosted-service-latency/">Realtime Hosted Service Latency Stats</a></li>
          <li><a href="/real-time-web-technologies-guide/realtime-data-sources/">Realtime Data Sources</a></li>
          <li><a href="/real-time-web-technologies-guide/realtime-web-technology-transport-mechanisms/">Transport Mechanisms</a></li>
        </ul>
      </li>
      <li><a href="/about-phil-leggetter/">About Phil Leggetter</a>
        <ul>
          <li><a href="/leggetter-family-tree">The Unique Name of Leggetter</a></li>
          <li><a href="/mygoffice">My Goffice</a></li>
        </ul>
      </li>
      <li><a href="#contact-me">Contact Me</a></li>
    </ul>
  </nav>

</div>

	</div>

	<!-- Main -->
	<div class="main-wrapper wrapper style2">

    <div class="title">
			<a href="https://twitter.com/leggetter"><i class="fa fa-twitter-square fa2"></i></a>
<a href="http://www.linkedin.com/in/leggetter"><i class="fa fa-linkedin-square fa2"></i></a>
<a href="https://github.com/leggetter"><i class="fa fa-github-square fa2"></i></a>
<a href="http://stackoverflow.com/users/39904/leggetter"><i class="fa fa-stack-overflow fa2"></i></a>

		</div>

    <div id="main" class="container">
      <div class="row 150%">
        <div class="8u 12u(mobile)">
          <div id="content">
            <h1>XMPP PubSub or PubSubHubbub for real-time server push?</h1>
<p class="meta">17 Sep 2010</p>

<div class="post">
<p>In case you hadn't noticed,&nbsp;<a href="http://leggetter.posterous.com/hit-roond-around-the-heed-head-by-a-faash-fis" >when I'm not getting hit by flying trout</a>, I like to think of myself as a bit of <a href="/" >a real-time web guy</a>. However, there's one thing I'd like clarification on, and I'm confident somebody will be able to shed some light on this:</p>

<p />
<strong>What are the differences between </strong><a href="http://xmpp.org/extensions/xep-0060.html"><strong>XMPP PubSub</strong></a><strong> and </strong><a href="http://code.google.com/apis/pubsubhubbub/"><strong>PubSubHubbub</strong></a><strong> and in what situations should each be used?</strong></p>

<p />
I do think I know some details about this but I'd like what I think I know to be confirmed or indeed corrected.</p>

<p />
My knowledge of the real-time web, and specifically real-time client push, comes from working for&nbsp;<a href="http://www.caplin.com/" >Caplin Systems</a>&nbsp;who pioneered building Comet servers around 10 years ago. From working with Caplin Systems and with Comet servers I've gained an understanding of how connections are made&nbsp;using different technologies&nbsp;and maintained in different scenarios. I also believe that I have a good understanding of what the best connection method is to deliver real-time data whether the delivery be from <strong>server to client using real-time client push</strong> or <strong>server to server using PubSubHubub or XMPP PubSub</strong>.</p>

<p />
<span style="font-size: large;">Persistent Connections</span></p>

<p />
Unless the frequency of data updates is very low, and if you want to truly deliver data in real-time, the best type of connection is a persistent one.</p>

<p />
As well as a persistent connection being able to deliver data faster it also means that your data subscriber does not have to handle a new HTTP connection for each piece of data it receives. This can actually be a really big thing.</p>

<p />
As part of building <a href="http://kwwika.com">Kwwika</a> I wrote a demo which integrated the real-time server push&nbsp;capabilities&nbsp;of <a href="http://superfeedr.com">Superfeedr</a> with the real-time client push&nbsp;capabilities&nbsp;of Kwwika to build a <a href="http://superfeedr.kwwika.com">real-time news reader</a>&nbsp;(RTNR) (<a href="/2010/08/26/real-time-news-reader-shows-off-push-to-browser.html">blog article</a>). In order to receive updates from Superfeedr I had to implement a publisher-subscriber outside of the Kwwika infrastructure. I decided to write a&nbsp;<a href="http://superfeedr.com/documentation#pubsubhubbub">PubSubHubbub</a>&nbsp;implementation in ASP.NET so that I could use a few other <a href="http://github.com/Kwwika/Kwwika-Components">.NET Kwwika components</a> to easily integrate with Kwwika.</p>

<p />
So,&nbsp;each time Superfeedr has an update for the&nbsp;RTNR&nbsp;it establishes a HTTP connection to the&nbsp;RTNR PubSubhubbub&nbsp;server and sends the update which is then parsed and pushed into Kwwika to be distributed to subscribing web clients. If the&nbsp;RTNR&nbsp;is subscribing to something that is updating really frequently (such as "google" using <a href="http://superfeedr.com/documentation#track">Superfeedr track</a>) then that can mean the&nbsp;RTNR&nbsp;server has to handle a lot of HTTP requests. Since I am running the demo on a small Amazon Windows instance running IIS it doesn't take all that long, under a heavy load, for the server to stop responding.</p>

<p />
There must be a better way!</p>

<p />
<span style="font-size: large;">Real-time client push</span></p>

<p />
By way of a comparison let's first take a look at real-time client push.</p>

<p />
Before WebSockets provided the simplest way&nbsp;(but as yet not the most reliable since the WebSocket standard is not set in stone and isn't supported cross-browser)&nbsp;to achieve real-time push to a web browser the best connection method was to maintain a streaming and persistent HTTP connection from the publisher to the client subscriber (using an IFRAME, XMLHttpRequest or XDomainRequest). The persistent connection means that the connection has already been established so as soon as the publisher has any new data for the subscriber it can instantly be pushed to it. This means that the data can be delivered to the web browser as close to real-time as possible.</p>

<p />
<span style="font-size: large;">Real-time Server Push</span></p>

<p />
<strong>PubSubHubbub</strong></p>

<p />
PubSubHubbub turns things on it's head in comparison to real-time client push (it actually uses HTTP as it was designed and it's HTTP streaming that uses things in reverse. See <a href="http://en.wikipedia.org/wiki/Reverse_Ajax">Reverse Ajax</a>.). In this case the publisher still pushes the new data to the subscriber but it does it using a HTTP request. The problem with this is that for each push a new HTTP connection needs to be established and the data then needs to be transferred. Establishing a connection takes time and resources so clearly a single persistent connection is a better solution. This is where I think XMPP PubSub is a better solution.</p>

<p />
<strong>XMPP PubSub</strong></p>

<p />
If you need your data to be delivered in truly real-time (or as close to real-time as web technology will allow) then you have to use a persistent connection between the publisher and the subscriber. It's my understanding that since XMPP was developed as an <strong>instant</strong> messaging protocol that it uses a persistent connection.</p>

<p />
<span style="font-size: large;">Conclusion</span></p>

<p />
Here are things as I see them:</p>

<ul>
<li>If you want your data in real-time you should use a persistent connection between the publisher and subscriber.</li>
<li>If you are making a server to server subscription to data that doesn't update all that often&nbsp;and instant real-time doesn't matter&nbsp;then PubSubHubbub is fine.</li>
<li>If you are making a server to server subscription to data that updates very frequently then you need to use a persistent connection and XMPP PubSub is a must.</li>
</ul>

<p>One thing to also consider is if you are subscribing to multiple sources which update frequently then maintaining a persistent connection to each of those sources, assuming they even allow you to, takes a considerable amount of effort and potentially resource. This is where a service like Superfeedr comes in to its own. They manage the subscriptions and connections to the sources for you which means you only need to maintain one persistent connection to Superfeedr. They do all the heavy lifting so you don't have to.</p>

<p><a href="http://leggetter.posterous.com/xmpp-pubsub-or-pubsubhubbub-for-real-time-ser">Permalink</a><br />
| <a href="http://leggetter.posterous.com/xmpp-pubsub-or-pubsubhubbub-for-real-time-ser#comment">Leave a comment&nbsp;&nbsp;&raquo;</a></p>

</div>

<hr />

<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'leggetter';
var disqus_url = 'https://www.leggetter.co.uk/technology/2010/09/17/xmpp-pubsub-or-pubsubhubbub-for-real-time-server-push.html';



var disqus_identifier = '1853 https://www.leggetter.co.uk/?page_id=1853';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


          </div>
        </div>
        <div class="4u 12u(mobile)">
          <!-- Sidebar -->
<div id="sidebar">

  <section class="box">

  <form action="https://leggetter.us2.list-manage.com/subscribe/post?u=75fcbc606555d96262c1cd5bd&amp;id=e0524b92e7" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
    <header>
      <h2>Get posts via email</h2>
    </header>
    <div class="mc-field-group" style="margin-top: -25px;">
      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address" style="display:inline-block; margin:0; width: auto;">
      <input type="submit" value="Go" name="subscribe" id="mc-embedded-subscribe" class="button" style="display:inline-block; min-width: inherit; line-height: 1em;
      height: 3.1em;
      vertical-align: top;">
    </div>
    <div id="mce-responses" class="clear">
      <div class="response" id="mce-error-response" style="display:none"></div>
      <div class="response" id="mce-success-response" style="display:none"></div>
    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_75fcbc606555d96262c1cd5bd_e0524b92e7" value=""></div>
  </form>

  <!--End mc_embed_signup-->
</section>


  <section class="box about">

  <img class="avatar grav-hashed grav-hijack" src="https://www.gravatar.com/avatar/ecc56977271e781991b6172c16248459?s=400" align="center" alt="Phil Leggetter - Realtime Web Technology Evangelist" id="grav-ecc56977271e781991b6172c16248459-0" originals="200" width="200" height="200" src-orig="https://www.gravatar.com/avatar/ecc56977271e781991b6172c16248459?s=200" scale="2" style="margin: auto; margin-bottom: 2em; display: inherit;">
  <p>My name is <strong>Phil Leggetter</strong>. I lead Developer Relations at <a href="https://posthog.com">PostHog</a>. I also advise on developer relations and developer experience at <a href="https://tru.id">tru.ID</a> and <a href="https://crosser.io">Crosser</a>.</p>

</section>


  <!-- <section class="box">
  <header>
    <h2><a href="http://www.amazon.com/gp/product/1430246200/ref=as_li_ss_il?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1430246200&amp;linkCode=as2&amp;tag=phillegg-20">Realtime Web Apps: With HTML5 WebSocket, PHP, and jQuery</a></h2>
  </header>
  <div style="text-align: center; margin-top: 10px;">
    <a href="http://www.amazon.com/gp/product/1430246200/ref=as_li_ss_il?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1430246200&amp;linkCode=as2&amp;tag=phillegg-20"><img border="0" src="https://www.leggetter.co.uk/wp-content/uploads/2013/04/realtime-web-apps-sml.jpg" scale="0"></a><img src="https://www.assoc-amazon.com/e/ir?t=phillegg-20&amp;l=as2&amp;o=1&amp;a=1430246200" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" scale="0">
    <p>Buy the book I co-write with <a href="http://lengstorf.com/">Jason Lengstorf</a> via <a href="http://www.amazon.com/gp/product/1430246200/ref=as_li_ss_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1430246200&amp;linkCode=as2&amp;tag=phillegg-20">Amazon.com</a> or <a href="http://j.mp/realtime-web-apps-uk">Amazon.co.uk</a></p>
  </div>
</section>
 -->

</div>

        </div>
      </div>
    </div>
	</div>
	<!-- /Main -->

	<!-- Footer Wrapper -->
	<div id="footer-wrapper" class="wrapper">
		<div class="title">Get In Touch</div>
		<div id="footer" class="container">

				<!-- Contact -->
				<a name="contact-me" id="contact-me"></a>
				<section class="feature-list small">
					<div class="row">
	          <div class="-2u 4u">
	            <section>
	              <h3 class="icon fa-comment">Social</h3>
	              <p>
									<a href="https://twitter.com/leggetter"><i class="fa fa-twitter-square fa2"></i></a>
<a href="http://www.linkedin.com/in/leggetter"><i class="fa fa-linkedin-square fa2"></i></a>
<a href="https://github.com/leggetter"><i class="fa fa-github-square fa2"></i></a>
<a href="http://stackoverflow.com/users/39904/leggetter"><i class="fa fa-stack-overflow fa2"></i></a>

	              </p>
	            </section>
	          </div>
						<div class="-1u 4u">
							<section>
								<h3 class="icon fa-envelope">Email</h3>
								<p>
									<a href="mailto:phil@leggetter.co.uk">phil@leggetter.co.uk</a>
								</p>
							</section>
						</div>
					</div>
				</section>

			</div>

			<hr />

			<div id="copyright">
				<ul>
					<li>&copy; Phil Leggetter.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
				</ul>
			</div>

		</div>
		<!-- / Footer Wrapper -->

	</div>
	
	<script src="/skel/assets/js/jquery.dropotron.min.js"></script>
	<script src="/skel/assets/js/skel.min.js"></script>
	<script src="/skel/assets/js/skel-viewport.min.js"></script>
	<script src="/skel/assets/js/util.js"></script>
	<!--[if lte IE 8]><script src="/skel/assets/js/ie/respond.min.js"></script><![endif]-->
	<script src="/skel/assets/js/main.js"></script>
	
	<script src="/bower_components/jquery-smooth-scroll/jquery.smooth-scroll.min.js"></script>

	<script>
		( function() {
			try {
				$( 'a[href="#contact-me"]' ).smoothScroll();
			} catch(e){}
		} )();
	</script>

  <script src="/libs/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

	<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-513034-10', 'auto');
ga('send', 'pageview');

</script>


	<!-- realtime benchmarks -->
	<!--script src="//cdnjs.cloudflare.com/ajax/libs/headjs/1.0.3/head.min.js"></script-->
	<!-- <script src="http://localhost:5000/benchmark.js"></script> -->
	<!--script src="https://realtime-latency-stats.herokuapp.com/benchmark.js"></script-->
</body>
</html>
<!--
Escape Velocity by HTML5 UP
html5up.net | @n33co
Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
